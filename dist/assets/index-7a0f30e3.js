import{d as z,a2 as P,A as L,O as M,a1 as B,h as C,B as S,C as N,J as t,S as F,D as e,Q as o,U as s,W as n,_ as x,ab as g,ac as _,ag as G,I as j,a8 as J,ah as V,P as w,ai as E,r as A,N as W,aj as H,F as I,ak as q,al as U,R as Q,am as Y,an as K}from"./index-edb9466f.js";function X(){const f=new Date,l=f.getDate(),u=f.getMonth()+1;return`${f.getFullYear()}-${u}-${l}`}const Z={class:"p-4 space-y-5 min-h-[200px]"},ee={class:"space-y-6"},te={class:"flex-shrink-0 w-[100px]"},se={class:"flex flex-wrap items-center gap-4"},ae={class:"flex items-center space-x-4"},ne={class:"flex-shrink-0 w-[100px]"},oe={class:"flex flex-wrap items-center gap-4"},le={class:"flex items-center space-x-4"},ie={class:"flex-shrink-0 w-[100px]"},ce={class:"flex flex-wrap items-center gap-4"},re={class:"flex items-center space-x-4"},de={class:"flex-shrink-0 w-[100px]"},ue=z({__name:"General",setup(f){const l=P(),u=L(),{isMobile:p}=M(),h=B(),v=C(()=>l.theme),i=C({get(){return l.language},set(a){l.setLanguage(a)}}),c=[{label:"Auto",key:"auto",icon:"ri:contrast-line"},{label:"Light",key:"light",icon:"ri:sun-foggy-line"},{label:"Dark",key:"dark",icon:"ri:moon-foggy-line"}],d=[{label:"简体中文",key:"zh-CN",value:"zh-CN"},{label:"繁體中文",key:"zh-TW",value:"zh-TW"},{label:"English",key:"en-US",value:"en-US"}];function k(){u.resetUserInfo(),h.success(w("common.success")),window.location.reload()}function D(){const a=X(),m=localStorage.getItem("chatStorage")||"{}",r=JSON.stringify(JSON.parse(m),null,2),y=new Blob([r],{type:"application/json"}),b=URL.createObjectURL(y),$=document.createElement("a");$.href=b,$.download=`chat-store_${a}.json`,document.body.appendChild($),$.click(),document.body.removeChild($)}function R(a){const m=a.target;if(!m||!m.files)return;const r=m.files[0];if(!r)return;const y=new FileReader;y.onload=()=>{try{const b=JSON.parse(y.result);localStorage.setItem("chatStorage",JSON.stringify(b)),h.success(w("common.success")),location.reload()}catch{h.error(w("common.invalidFileFormat"))}},y.readAsText(r)}function T(){localStorage.removeItem("chatStorage"),location.reload()}function O(){const a=document.getElementById("fileInput");a&&a.click()}return(a,m)=>(S(),N("div",Z,[t("div",ee,[t("div",{class:F(["flex items-center space-x-4",e(p)&&"items-start"])},[t("span",te,o(a.$t("setting.chatHistory")),1),t("div",se,[s(e(_),{size:"small",onClick:D},{icon:n(()=>[s(e(x),{icon:"ri:download-2-fill"})]),default:n(()=>[g(" "+o(a.$t("common.export")),1)]),_:1}),t("input",{id:"fileInput",type:"file",style:{display:"none"},onChange:R},null,32),s(e(_),{size:"small",onClick:O},{icon:n(()=>[s(e(x),{icon:"ri:upload-2-fill"})]),default:n(()=>[g(" "+o(a.$t("common.import")),1)]),_:1}),s(e(G),{placement:"bottom",onPositiveClick:T},{trigger:n(()=>[s(e(_),{size:"small"},{icon:n(()=>[s(e(x),{icon:"ri:close-circle-line"})]),default:n(()=>[g(" "+o(a.$t("common.clear")),1)]),_:1})]),default:n(()=>[g(" "+o(a.$t("chat.clearHistoryConfirm")),1)]),_:1})])],2),t("div",ae,[t("span",ne,o(a.$t("setting.theme")),1),t("div",oe,[(S(),N(j,null,J(c,r=>s(e(_),{key:r.key,size:"small",type:r.key===e(v)?"primary":void 0,onClick:y=>e(l).setTheme(r.key)},{icon:n(()=>[s(e(x),{icon:r.icon},null,8,["icon"])]),_:2},1032,["type","onClick"])),64))])]),t("div",le,[t("span",ie,o(a.$t("setting.language")),1),t("div",ce,[s(e(V),{style:{width:"140px"},value:e(i),options:d,onUpdateValue:m[0]||(m[0]=r=>e(l).setLanguage(r))},null,8,["value"])])]),t("div",re,[t("span",de,o(a.$t("setting.resetUserInfo")),1),s(e(_),{size:"small",onClick:k},{default:n(()=>[g(o(a.$t("common.reset")),1)]),_:1})])])]))}}),pe={class:"p-4 space-y-5 min-h-[200px]"},me={class:"space-y-6"},fe={class:"flex items-center space-x-4"},he={class:"flex-shrink-0 w-[100px]"},ge={class:"flex-1"},_e={class:"flex items-center space-x-4"},ve=t("span",{class:"flex-shrink-0 w-[100px]"}," ",-1),ye=z({__name:"Advanced",setup(f){const l=E(),u=B(),p=A(l.systemMessage??"");function h(i){l.updateSetting(i),u.success(w("common.success"))}function v(){l.resetSetting(),u.success(w("common.success")),window.location.reload()}return(i,c)=>(S(),N("div",pe,[t("div",me,[t("div",fe,[t("span",he,o(i.$t("setting.role")),1),t("div",ge,[s(e(W),{value:p.value,"onUpdate:value":c[0]||(c[0]=d=>p.value=d),type:"textarea",autosize:{minRows:1,maxRows:4}},null,8,["value"])]),s(e(_),{size:"tiny",text:"",type:"primary",onClick:c[1]||(c[1]=d=>h({systemMessage:p.value}))},{default:n(()=>[g(o(i.$t("common.save")),1)]),_:1})]),t("div",_e,[ve,s(e(_),{size:"small",onClick:v},{default:n(()=>[g(o(i.$t("common.reset")),1)]),_:1})])])]))}}),xe={class:"ml-2"},ke={class:"min-h-[100px]"},$e={class:"ml-2"},we={class:"min-h-[100px]"},be=z({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible"],setup(f,{emit:l}){const u=f,p=H(),h=C(()=>!!p.isChatGPTAPI),v=A("General"),i=C({get(){return u.visible},set(c){l("update:visible",c)}});return(c,d)=>(S(),I(e(K),{show:e(i),"onUpdate:show":d[1]||(d[1]=k=>Y(i)?i.value=k:null),"auto-focus":!1,preset:"card",style:{width:"95%","max-width":"640px"}},{default:n(()=>[t("div",null,[s(e(q),{value:v.value,"onUpdate:value":d[0]||(d[0]=k=>v.value=k),type:"line",animated:""},{default:n(()=>[s(e(U),{name:"General",tab:"General"},{tab:n(()=>[s(e(x),{class:"text-lg",icon:"ri:file-user-line"}),t("span",xe,o(c.$t("setting.general")),1)]),default:n(()=>[t("div",ke,[s(ue)])]),_:1}),e(h)?(S(),I(e(U),{key:0,name:"Advanced",tab:"Advanced"},{tab:n(()=>[s(e(x),{class:"text-lg",icon:"ri:equalizer-line"}),t("span",$e,o(c.$t("setting.advanced")),1)]),default:n(()=>[t("div",we,[s(ye)])]),_:1})):Q("",!0)]),_:1},8,["value"])])]),_:1},8,["show"]))}});export{be as default};
